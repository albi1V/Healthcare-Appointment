/* ----- SCOPE CSS VARIABLES TO CHAT ONLY + PROVIDE FALLBACKS ----- */
.chat-container {
  /* Theme tokens */
  --bg: #ffffff;
  --panel: #f6f7fb;
  --line: #e8eaf0;
  --text: #1f2937;
  --muted: #6b7280;

  --primary: #1976d2;
  --primary-600: #155a9c;
  --user-bubble: #dbeafe;
  --bot-bubble: #dcfce7;
  --system-bubble: #fef3c7;
}

* { box-sizing: border-box; }

/* ----- FLOATING FAB ----- */
.chat-fab {
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 1100;
  width: 52px;
  height: 52px;
  border-radius: 50%;
  border: none;
  background-color: var(--primary, #1976d2); /* fallback */
  color: #fff;
  font-size: 18px;
  cursor: pointer;
  box-shadow: 0 10px 18px rgba(0,0,0,0.18);
  transition: transform .2s ease, background-color .2s ease;
}
.chat-fab:hover { transform: translateY(-2px); }

/* ----- CHAT WRAPPER ----- */
.chat-container {
  position: fixed;
  right: 20px;
  bottom: 86px;
  width: 380px;
  height: 560px;
  background-color: var(--bg, #ffffff);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1200; /* a bit higher than fab just in case */
}

/* ----- HEADER ----- */
.chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--line, #e8eaf0);
  background: linear-gradient(180deg, #ffffff 0%, #f9fafb 100%);
}
.header-left { display: flex; align-items: center; gap: 10px; }
.titles h3 { margin: 0; font-size: 16px; color: var(--text, #1f2937); }
.status { font-size: 12px; color: var(--muted, #6b7280); }
.dot.online { width: 8px; height: 8px; background: #22c55e; display: inline-block; border-radius: 50%; margin-right: 6px; vertical-align: middle; }

.header-right .ghost {
  background: transparent; border: none; color: var(--muted, #6b7280); cursor: pointer;
}

/* ----- MESSAGES ----- */
.messages {
  flex: 1;
  overflow-y: auto;
  background-color: var(--panel, #f6f7fb);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.message-row {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  max-width: 90%;
}
.message-row.user { margin-left: auto; flex-direction: row-reverse; }
.message-row.system { margin: 0 auto; }

.avatar {
  width: 28px; height: 28px; border-radius: 50%;
  background: #e5e7eb; color: #111827;
  display: grid; place-items: center;
  font-size: 11px; font-weight: 600;
}
.avatar.user { background: #c7d2fe; }
.avatar.bot { background: #a7f3d0; }
.avatar.system { background: #fde68a; }

/* ----- BUBBLES ----- */
.bubble {
  background-color: #fff;
  border-radius: 14px;
  padding: 10px 12px;
  box-shadow: 0 1px 0 rgba(0,0,0,0.05);
  border: 1px solid var(--line, #e8eaf0);
  color: var(--text, #1f2937);
}
.bubble.user {
  background-color: var(--user-bubble, #dbeafe);
  border: 1px solid #c7ddfb;
  border-bottom-right-radius: 6px;
}

/* Increase specificity for bot bubble so nothing overrides it */
.message-row.bot .bubble,
.bubble.bot {
  background-color: var(--bot-bubble, #dcfce7) !important;
  border: 1px solid #cdeccd !important;
  border-bottom-left-radius: 6px !important;
}

.bubble.system {
  background-color: var(--system-bubble, #fef3c7);
  border: 1px solid #fde68a;
}

.bubble .text { white-space: pre-wrap; word-wrap: break-word; }
.meta {
  display: flex; gap: 8px; margin-top: 6px;
  font-size: 11px; color: var(--muted, #6b7280);
}
.badge.error {
  background: #fee2e2; color: #991b1b; padding: 2px 6px; border-radius: 10px;
}

/* ----- TYPING ----- */
.typing { display: inline-flex; gap: 6px; align-items: center; }
.typing .dot {
  width: 6px; height: 6px; background: #6b7280; border-radius: 50%;
  animation: bounce 1s infinite ease-in-out;
}
.typing .dot:nth-child(2) { animation-delay: .15s; }
.typing .dot:nth-child(3) { animation-delay: .3s; }
@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: .4; }
  40% { transform: translateY(-4px); opacity: 1; }
}

/* ----- QUICK REPLIES ----- */
.quick-replies {
  display: flex; gap: 8px; flex-wrap: wrap;
  padding: 8px 12px; background: #fff; border-top: 1px solid var(--line, #e8eaf0);
}
.chip {
  border: 1px solid var(--line, #e8eaf0);
  background: #fff;
  padding: 6px 10px;
  border-radius: 16px;
  font-size: 12px;
  color: var(--text, #1f2937);
  cursor: pointer;
}
.chip:hover { border-color: #c9ced6; }

/* ----- INPUT AREA ----- */
.input-box {
  display: flex; gap: 8px; align-items: flex-end;
  border-top: 1px solid var(--line, #e8eaf0);
  background: #fff;
  padding: 10px;
  position: relative;
  z-index: 1; /* ensure above any overlapping elements */
}
textarea {
  flex: 1;
  resize: none;
  border: 1px solid #cfd4dc;
  border-radius: 12px;
  padding: 10px 12px;
  min-height: 42px;
  max-height: 140px;
  font: inherit;
  outline: none;
  background-color: #fff;
  color: var(--text, #1f2937);
}
textarea:focus { border-color: var(--primary, #1976d2); box-shadow: 0 0 0 3px rgba(25,118,210,.12); }

/* Explicitly style our custom buttons with higher specificity */
.input-box button.primary {
  background-color: var(--primary, #1976d2) !important;
  color: #fff !important;
  border: none !important;
  height: 42px; padding: 0 14px;
  border-radius: 10px; cursor: pointer;
  display: inline-flex; align-items: center; justify-content: center;
}
.input-box button.primary:disabled { background-color: #93c5fd !important; cursor: not-allowed; }
.input-box button.primary:hover:not(:disabled) { background-color: var(--primary-600, #155a9c) !important; }

.input-box button.secondary {
  background-color: #eef2f7 !important; 
  color: #334155 !important; 
  border: 1px solid #d4d9e1 !important;
  height: 42px; padding: 0 12px; border-radius: 10px; cursor: pointer;
  display: inline-flex; align-items: center; justify-content: center;
}

/* ----- DISCLAIMER ----- */
.disclaimer {
  font-size: 11px; color: var(--muted, #6b7280);
  text-align: center; padding: 6px 10px; background: #fff; border-top: 1px solid var(--line, #e8eaf0);
}

/* ----- Responsive ----- */
@media (max-width: 600px) {
  .chat-container {
    right: 8px; left: 8px; width: auto; height: 70vh;
    bottom: 86px;
  }
}

/* Remove duplicate rules (keep only one copy) */











